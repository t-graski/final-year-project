<div class="staff-dashboard">
  @if (!$isLoading()) {
    <app-navbar
      [$title]="'Staff Dashboard'"
      [$subTitle]="'Welcome back, ' + $staffName()"
      [$userName]="getCurrentUserName()"
      [$userEmail]="getCurrentUserEmail()"
      [$links]="[]">
    </app-navbar>

    <div class="staff-dashboard-content">
      <div class="action-buttons">
        <button class="action-button" (click)="navigateToStudentRecords()">
          <mat-icon fontIcon="people"></mat-icon>
          <span>View Student Records</span>
        </button>
        <button class="action-button action-button--disabled">
          <mat-icon fontIcon="assessment"></mat-icon>
          <span>Coming Soon</span>
        </button>
      </div>

      <app-card>
        <div class="modules-container">
          <div class="modules-header">
            <div class="modules-title">
              <mat-icon fontIcon="menu_book"></mat-icon>
              <h3>My Modules</h3>
            </div>
            <div class="search-wrapper">
              <mat-icon fontIcon="search"></mat-icon>
              <input
                type="text"
                placeholder="Search modules..."
                [value]="$searchQuery()"
                (input)="onSearchChange($any($event.target).value)"
              />
            </div>
          </div>

          <div class="modules-list">
            @for (module of $filteredModules(); track module.moduleId) {
              <div class="module-item" (click)="onModuleClick(module)">
                <div class="module-info">
                  <h4>{{ module.title }}</h4>
                  <p class="module-code">{{ module.moduleCode }}</p>
                  <p class="module-details">Year {{ module.yearOfStudy }} - Semester {{ module.semester }}</p>
                </div>
                <mat-icon fontIcon="chevron_right"></mat-icon>
              </div>
            } @empty {
              <p class="no-modules">
                {{ $searchQuery() ? 'No modules found matching your search' : 'No modules assigned' }}
              </p>
            }
          </div>
        </div>
      </app-card>
    </div>
  } @else {
    <div class="loading">
      <p>Loading dashboard...</p>
    </div>
  }
</div>
